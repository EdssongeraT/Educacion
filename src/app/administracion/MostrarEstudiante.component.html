<app-header-admin pageTitle="Perfil" imageUrl="star" helpType="settingspage"></app-header-admin>
<mat-card [@fallIn]='estado'>
  <mat-card-content>
    <form #editDataForm="ngForm" novalidate>
      <mat-error *ngIf="guardaCambios">
        Los cambios se han guardado
        <label class="small-spacer"></label>
        <mat-icon (click)="guardaCambios=false;" svgIcon="clear"></mat-icon>
      </mat-error>
      <mat-progress-bar mode="indeterminate" *ngIf="cargando"></mat-progress-bar>
      <mat-error *ngIf="error">Error: {{ errorMsj }}</mat-error>
      <div *ngIf="!guardaCambios">
        <mat-accordion>
          <mat-expansion-panel>
            <mat-expansion-panel-header>
              <mat-panel-title>
                Datos personales (*)
              </mat-panel-title>
              <mat-panel-description>
                Nombre e informacion personal
              </mat-panel-description>
            </mat-expansion-panel-header>
            <mat-form-field>
              <input matInput placeholder="ID Estudiante" name="code" id="code" [ngModel]="data?.code" required
                minlength="2">
            </mat-form-field>
            <br>
            <mat-form-field>
              <input matInput placeholder="ContraseÃ±a" name="SKEY" id="SKEY" [ngModel]="data?.SKEY" required
                minlength="2">
            </mat-form-field>
            <br>
            <mat-form-field>
              <input matInput placeholder="Nombre(s)" name="descr" id="descr" [ngModel]="data?.descr" required
                minlength="4">
            </mat-form-field>

            <mat-form-field>
              <input matInput placeholder="Apellido Paterno" name="LAST_NAME" id="LAST_NAME" [ngModel]="data?.LAST_NAME"
                required minlength="4">
            </mat-form-field>
            <mat-form-field>
              <input matInput placeholder="Apellido Materno" name="MIDDLE_NAME" id="MIDDLE_NAME"
                [ngModel]="data?.MIDDLE_NAME" minlength="4">
            </mat-form-field>
            <br>
            <mat-form-field>
              <input matInput placeholder="Fecha de nacimiento" type="date" name="DOB" id="DOB" [ngModel]="data?.DOB"
                required>
            </mat-form-field>
            <br>
            <mat-form-field>
              <input matInput placeholder="Nombre del padre" name="FATHER_NAME" id="FATHER_NAME"
                [ngModel]="data?.FATHER_NAME" minlength="4">
            </mat-form-field>
            <mat-form-field>
              <input matInput placeholder="Nombre de la madre" name="MOTHER_NAME" id="MOTHER_NAME"
                [ngModel]="data?.MOTHER_NAME" minlength="4">
            </mat-form-field>
            <br>
            <mat-form-field>
              <input matInput placeholder="Nombre del tutor" name="GUARDIAN_NAME" id="GUARDIAN_NAME"
                [ngModel]="data?.GUARDIAN_NAME" minlength="4">
            </mat-form-field>
            <mat-form-field>
              <input matInput placeholder="Fecha de nacimiento del tutor" type="date" name="GDOB" id="GDOB"
                [ngModel]="data?.GDOB">
            </mat-form-field>
          </mat-expansion-panel>
          <mat-expansion-panel>
            <mat-expansion-panel-header>
              <mat-panel-title>
                Direccion
              </mat-panel-title>
              <mat-panel-description>
                Detalles del contacto
              </mat-panel-description>
            </mat-expansion-panel-header>
            <mat-form-field>
              <input matInput placeholder="Colonia" name="ADD_TYPE_1" id="ADD_TYPE_1" [ngModel]="data?.ADD_TYPE_1"
                minlength="4">
            </mat-form-field>
            <mat-form-field>
              <input matInput placeholder="Calle" name="ADD_LINE_1" id="ADD_LINE_1" [ngModel]="data?.ADD_LINE_1"
                minlength="4">
            </mat-form-field>
            <mat-form-field>
              <input matInput placeholder="numero" name="ADD_LINE_2" id="ADD_LINE_2" [ngModel]="data?.ADD_LINE_2">
            </mat-form-field>
            <br>
            <mat-form-field>
              <input matInput placeholder="Codigo postal" name="PIN_CODE" id="PIN_CODE" [ngModel]="data?.PIN_CODE">
            </mat-form-field>
            <mat-form-field>
              <input matInput placeholder="Estado" name="STATE" id="STATE" [ngModel]="data?.STATE">
            </mat-form-field>
            <mat-form-field>
              <input matInput placeholder="Pais" name="COUNTRY" id="COUNTRY" [ngModel]="data?.COUNTRY">
            </mat-form-field>
            <br>
            <mat-form-field>
              <input matInput placeholder="Colonia" name="ADD_TYPE_2" id="ADD_TYPE_2" [ngModel]="data?.ADD_TYPE_2"
                minlength="4">
            </mat-form-field>
            <mat-form-field>
              <input matInput placeholder="Calle" name="ADD_LINE_12" id="ADD_LINE_12" [ngModel]="data?.ADD_LINE_12"
                minlength="4">
            </mat-form-field>
            <mat-form-field>
              <input matInput placeholder="numero" name="ADD_LINE_22" id="ADD_LINE_22" [ngModel]="data?.ADD_LINE_22">
            </mat-form-field>
            <br>
            <mat-form-field>
              <input matInput placeholder="Codigo postal" name="PIN_CODE2" id="PIN_CODE2" [ngModel]="data?.PIN_CODE2">
            </mat-form-field>
            <mat-form-field>
              <input matInput placeholder="Estado" name="STATE2" id="STATE2" [ngModel]="data?.STATE2">
            </mat-form-field>
            <mat-form-field>
              <input matInput placeholder="Pais" name="COUNTRY2" id="COUNTRY2" [ngModel]="data?.COUNTRY2">
            </mat-form-field>
            <br>
            <mat-form-field>
              <input matInput placeholder="Telefono 1" name="MOBILE1" id="MOBILE1" [ngModel]="data?.MOBILE1" phone
                minlength="10">
            </mat-form-field>
            <mat-form-field>
              <input matInput placeholder="Telefono 2" name="MOBILE2" id="MOBILE2" [ngModel]="data?.MOBILE2" phone
                minlength="10">
            </mat-form-field>
            <br>
            <mat-form-field>
              <input matInput placeholder="Correo 1" name="EMAIL1" id="EMAIL1" [ngModel]="data?.EMAIL1" phone
                minlength="10">
            </mat-form-field>
            <mat-form-field>
              <input matInput placeholder="Correo 2" name="EMAIL2" id="EMAIL2" [ngModel]="data?.EMAIL2" phone
                minlength="10">
            </mat-form-field>
          </mat-expansion-panel>
          <mat-expansion-panel>
            <mat-expansion-panel-header>
              <mat-panel-title>
                Estudios
              </mat-panel-title>
              <mat-panel-description>
                Detalles de rendimiento
              </mat-panel-description>
            </mat-expansion-panel-header>
            <mat-form-field>
              <input matInput placeholder="Grado" name="DEGREE" id="DEGREE" [ngModel]="data?.DEGREE" minlength="4">
            </mat-form-field>
            <br>
            <mat-form-field>
              <input matInput placeholder="Ultima institucion asistida" name="COLLEGE" id="COLLEGE"
                [ngModel]="data?.COLLEGE" minlength="4">
            </mat-form-field>
            <br>
            <mat-form-field>
              <input matInput placeholder="Colonia" name="ADD_LINE_C1" id="ADD_LINE_C1" [ngModel]="data?.ADD_LINE_C1"
                minlength="4">
            </mat-form-field>
            <mat-form-field>
              <input matInput placeholder="Calle" name="ADD_LINE_C2" id="ADD_LINE_C2" [ngModel]="data?.ADD_LINE_C2">
            </mat-form-field>
            <br>
            <mat-form-field>
              <input matInput placeholder="Codigo Postal" name="PIN_CODE_C" id="PIN_CODE_C"
                [ngModel]="data?.PIN_CODE_C">
            </mat-form-field>
            <mat-form-field>
              <input matInput placeholder="Estado" name="STATE_C" id="STATE_C" [ngModel]="data?.STATE_C">
            </mat-form-field>
            <mat-form-field>
              <input matInput placeholder="Pais" name="COUNTRY_C" id="COUNTRY_C" [ngModel]="data?.COUNTRY_C">
            </mat-form-field>
          </mat-expansion-panel>
          <mat-expansion-panel>
            <mat-expansion-panel-header>
              <mat-panel-title>
                Referencias
              </mat-panel-title>
              <mat-panel-description>
                Detalles de referencias
              </mat-panel-description>
            </mat-expansion-panel-header>
            <mat-form-field>
              <input matInput placeholder="Referencia 1" name="REFERENCE_1" id="REFERENCE_1"
                [ngModel]="data?.REFERENCE_1" minlength="4">
            </mat-form-field>
            <mat-form-field>
              <input matInput placeholder="Referencia 1 direccion" name="REFERENCE_1_ADD" id="REFERENCE_1_ADD"
                [ngModel]="data?.REFERENCE_1_ADD" minlength="4">
            </mat-form-field>
            <br>
            <mat-form-field>
              <input matInput placeholder="Referencia 2" name="REFERENCE_2" id="REFERENCE_2"
                [ngModel]="data?.REFERENCE_2" minlength="4">
            </mat-form-field>
            <mat-form-field>
              <input matInput placeholder="Referencia 2 direccion" name="REFERENCE_2_ADD" id="REFERENCE_2_ADD"
                [ngModel]="data?.REFERENCE_2_ADD" minlength="4">
            </mat-form-field>
          </mat-expansion-panel>
          <mat-expansion-panel>
            <mat-expansion-panel-header>
              <mat-panel-title>
                RH (*)
              </mat-panel-title>
              <mat-panel-description>
                Detalles
              </mat-panel-description>
            </mat-expansion-panel-header>
            <mat-form-field>
              <input readonly="" matInput placeholder="Curso" name="ENROLLMENT_CODE" id="ENROLLMENT_CODE"
                [ngModel]="data?.ENROLLMENT_CODE" minlength="4">
            </mat-form-field>
            <mat-form-field>
              <input readonly="" matInput placeholder="Tarifa" name="FEE_CODE" id="FEE_CODE" [ngModel]="data?.FEE_CODE"
                minlength="4">
            </mat-form-field>
            <mat-form-field>
              <input readonly="" matInput placeholder="Calificaciones" name="MARKS_CODE" id="MARKS_CODE"
                [ngModel]="data?.MARKS_CODE" minlength="4">
            </mat-form-field>
          </mat-expansion-panel>
          <mat-expansion-panel>
            <mat-expansion-panel-header>
              <mat-panel-title>
                Documentos
              </mat-panel-title>
              <mat-panel-description>
                Documentos
              </mat-panel-description>
            </mat-expansion-panel-header>
            <div *ngFor="let file of data?.files">
              <br />
              <button type="button" mat-raised-button (click)="showDocument=!showDocument; getDocUrl(file);"
                color="primary">Mostrar documento</button>
            </div>
            <div *ngIf="showDocument">
              <span matTooltip="Close">
                <mat-icon color="primary" (click)="showDocument = !showDocument;">limpiar
                </mat-icon>
              </span>
              <br />
              <a href="{{ docUrl | async }}" target="_blank">Abrir documento {{ fileName }}</a>
            </div>
            <br>
            <div *ngIf="showFileUpload">
              <span matTooltip="Close">
                <mat-icon color="primary" (click)="showFileUpload = !showFileUpload;">limpiar
                </mat-icon>
              </span>
              <br />
              <app-fileupload fileUrl="STUDENT" docId="{{docId}}"></app-fileupload>
            </div>
            <br>
          </mat-expansion-panel>
        </mat-accordion>
      </div>
    </form>
  </mat-card-content>
</mat-card>